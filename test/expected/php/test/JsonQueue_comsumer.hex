00000000  3c 3f 70 68 70 0d 0a 2f  2a 2a 0d 0a 20 2a 20 40  |<?php../**.. * @|
00000010  76 61 72 20 47 6f 72 69  64 67 65 5c 52 65 6c 61  |var Goridge\Rela|
00000020  79 49 6e 74 65 72 66 61  63 65 20 24 72 65 6c 61  |yInterface $rela|
00000030  79 0d 0a 20 2a 2f 0d 0a  75 73 65 20 53 70 69 72  |y.. */..use Spir|
00000040  61 6c 5c 47 6f 72 69 64  67 65 3b 0d 0a 75 73 65  |al\Goridge;..use|
00000050  20 53 70 69 72 61 6c 5c  52 6f 61 64 52 75 6e 6e  | Spiral\RoadRunn|
00000060  65 72 3b 0d 0a 0d 0a 69  6e 69 5f 73 65 74 28 27  |er;....ini_set('|
00000070  64 69 73 70 6c 61 79 5f  65 72 72 6f 72 73 27 2c  |display_errors',|
00000080  20 27 73 74 64 65 72 72  27 29 3b 0d 0a 72 65 71  | 'stderr');..req|
00000090  75 69 72 65 20 27 76 65  6e 64 6f 72 2f 61 75 74  |uire 'vendor/aut|
000000a0  6f 6c 6f 61 64 2e 70 68  70 27 3b 0d 0a 0d 0a 24  |oload.php';....$|
000000b0  72 72 20 3d 20 6e 65 77  20 52 6f 61 64 52 75 6e  |rr = new RoadRun|
000000c0  6e 65 72 5c 57 6f 72 6b  65 72 28 6e 65 77 20 53  |ner\Worker(new S|
000000d0  70 69 72 61 6c 5c 47 6f  72 69 64 67 65 5c 53 74  |piral\Goridge\St|
000000e0  72 65 61 6d 52 65 6c 61  79 28 53 54 44 49 4e 2c  |reamRelay(STDIN,|
000000f0  20 53 54 44 4f 55 54 29  29 3b 0d 0a 0d 0a 77 68  | STDOUT));....wh|
00000100  69 6c 65 20 28 24 62 6f  64 79 20 3d 20 24 72 72  |ile ($body = $rr|
00000110  2d 3e 72 65 63 65 69 76  65 28 24 63 6f 6e 74 65  |->receive($conte|
00000120  78 74 29 29 20 7b 0d 0a  20 20 20 20 74 72 79 20  |xt)) {..    try |
00000130  7b 0d 0a 20 20 20 20 20  20 20 20 2f 2f 20 68 61  |{..        // ha|
00000140  6e 64 6c 65 20 24 62 6f  64 79 20 73 74 72 69 6e  |ndle $body strin|
00000150  67 0d 0a 0d 0a 20 20 20  20 20 20 20 20 24 72 72  |g....        $rr|
00000160  2d 3e 73 65 6e 64 28 22  22 2c 20 28 73 74 72 69  |->send("", (stri|
00000170  6e 67 29 24 63 6f 6e 74  65 78 74 29 3b 0d 0a 20  |ng)$context);.. |
00000180  20 20 20 7d 20 63 61 74  63 68 20 28 5c 54 68 72  |   } catch (\Thr|
00000190  6f 77 61 62 6c 65 20 24  65 29 20 7b 0d 0a 20 20  |owable $e) {..  |
000001a0  20 20 20 20 20 20 24 72  72 2d 3e 65 72 72 6f 72  |      $rr->error|
000001b0  28 28 73 74 72 69 6e 67  29 24 65 29 3b 0d 0a 20  |((string)$e);.. |
000001c0  20 20 20 7d 0d 0a 7d 0d  0a                       |   }..}..|
000001c9
